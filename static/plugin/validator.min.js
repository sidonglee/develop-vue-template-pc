!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.validator=r()}(this,function(){"use strict";function t(r,n){if(!this instanceof t)throw new Error("Validator is a constructor and should be called with the `new` keyword");this.data=r,this.constraints=n,this.results=null,this.count=0}function r(t){this.valider=function(){return t},this.errors=null,this.msgs=[]}function n(t){var r={};for(var n in t)for(var e in t[n]){var o=t[n];"msg"!==e&&(r[e]={val:o[e],msg:o.msg})}return r}var e=function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=function(t,r){for(var n in r)if(r[n]===t)return!0;return!1},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=(function(){function t(t){this.value=t}function r(r){function n(o,i){try{var u=r[o](i),s=u.value;s instanceof t?Promise.resolve(s.value).then(function(t){n("next",t)},function(t){n("throw",t)}):e(u.done?"return":"normal",u.value)}catch(t){e("throw",t)}}function e(t,r){switch(t){case"return":o.resolve({value:r,done:!0});break;case"throw":o.reject(r);break;default:o.resolve({value:r,done:!1})}(o=o.next)?n(o.key,o.arg):i=null}var o,i;this._invoke=function(t,r){return new Promise(function(e,u){var s={key:t,arg:r,resolve:e,reject:u,next:null};i?i=i.next=s:(o=i=s,n(t,r))})},"function"!=typeof r.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(t){return this._invoke("next",t)},r.prototype.throw=function(t){return this._invoke("throw",t)},r.prototype.return=function(t){return this._invoke("return",t)}}(),{required:function(t,r){return!r||void 0!==t},eq:function(t,r){return t===r},not:function(t,r){return t!==r},type:function(t,r){return null===t||void 0===t?t===r:t.constructor===r},length:function(t,r){return e(r)?"string"==typeof t||e(t)?t.length>=r[0]&&t.length<=r[1]:void 0:!(!t||!t.length||t.length!==r)},min:function(t,r){return t>=r},max:function(t,r){return t<=r},gt:function(t,r){return t>r},gte:function(t,r){return t>=r},lt:function(t,r){return t<r},lte:function(t,r){return t<=r},between:function(t,r){return r[0]<=t&&t<=r[1]},notBetween:function(t,r){return t<r[0]||t>r[1]},in:function(t,r){return e(r)?o(t,r):"object"===(void 0===r?"undefined":i(r))?t in r:"string"==typeof r&&r.indexOf(t)>-1},notIn:function(t,r){return e(r)?!o(t,r):"object"===(void 0===r?"undefined":i(r))?!(t in r):"string"==typeof r&&-1===r.indexOf(t)},match:function(t,r){return"string"==typeof t&&new RegExp(r).test(t)},notMatch:function(t,r){return"string"==typeof t&&!new RegExp(r).test(t)},like:function(t,r){return"string"==typeof r&&("%"!==r[0]&&(r="^"+r),"%"!==r[r.length-1]&&(r+="$"),new RegExp(r.replace(/%/g,".*")).test(t))},notLike:function(t,r){return"string"==typeof r&&("%"!==r[0]&&(r="^"+r),"%"!==r[r.length-1]&&(r+="$"),!new RegExp(r.replace(/%/g,".*")).test(t))},email:function(t,r){return!r||/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(t)},upperCase:function(t,r){return!r||t===t.toUpperCase()},lowerCase:function(t,r){return!r||t===t.toLowerCase()},run:function(t,r){return"function"!=typeof r||r(t)}});return t.prototype.validate=function(t){var r={};for(var n in this.constraints){var e=this.constraints[n];r[n]={};var o=0;for(var i in e){var u=e[i],s=this.validRule(i,this.data[n],u);o+=~~!s,r[n][i]={val:u.val,msg:u.msg,result:s}}if(o>0){if(e.required&&e.required.val&&(this.count++,t))break;if(void 0!==this.data[n]&&(this.count++,t))break}}return this.results=r,r},t.prototype.validRule=function(t,r,n){var e=u[t];if(!e)throw new Error("undefined rule type: `"+t+"`");return e.apply(this.constraints||null,[r,n.val])},r.prototype.parseMsg=function(t){return t},r.prototype.fails=function(){return this.valider().count>0},r.prototype.all=function(t){if(!this.errors){this.errors={};for(var r in this.valider().results)this.errors[r]=this.get(r)}if(t){var n=[];for(var e in this.errors)if(this.errors[e].length>0)for(var o in this.errors[e])n.push(this.errors[e][o]);return n}return this.errors},r.prototype.get=function(t,r){var n=this.valider().results[t];if(!n)return console.warn("The field does not exist in constraints"),[];if(r)return n;if(void 0===this.valider().data[t]){if(!n.hasOwnProperty("required"))return[];if(n.hasOwnProperty("required")&&n.required.result)return[]}var e=[];for(var o in n)n[o].result||e.push(this.parseMsg(n[o].msg));return e},r.prototype.has=function(t){return this.get(t).length>0},r.prototype.first=function(t){if(t)return this.get(t)[0];this.errors||this.all();for(var r in this.errors)if(this.errors[r].length>0)return this.errors[r][0]},r.prototype.last=function(t){var r=this.get(t);return r[r.length-1]},{Validator:t,Rule:u,validate:function(o,u,s){var f={};for(var a in u)f[a]={},e(u[a])?f[a]=n(u[a]):"object"===i(u[a])&&(f[a]=n([u[a]]));var c=new t(o,f);return c.validate(s),new r(c)},pushRule:function(t,r){return u.hasOwnProperty(t)?(console.warn("The rule type `"+t+"` is exist"),!1):"function"!=typeof r?(console.warn("The rule fun must be a function"),!1):(u[t]=r,console.log(u),!0)}}});
//# sourceMappingURL=validator.min.js.map
